<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="ai.author" content="ChatGPT-5.3-Codex">
  <meta name="ai.note" content="This file was generated by ChatGPT-5.3-Codex.">
  <title>Mandelbrot Explorer Part.2 - ChatGPT-5.3-Codex</title>
  <style>
    :root {
      --panel: rgba(6, 11, 25, 0.76);
      --line: rgba(118, 204, 255, 0.34);
      --text: #daedff;
    }
    body {
      margin: 0;
      overflow: hidden;
      background:
        radial-gradient(circle at 18% 10%, rgba(64, 127, 255, 0.2), transparent 30%),
        #040711;
      color: var(--text);
      font-family: "Segoe UI", Meiryo, sans-serif;
    }
    canvas { display: block; width: 100vw; height: 100vh; image-rendering: pixelated; }
    .hud {
      position: fixed;
      left: 12px;
      top: 12px;
      z-index: 10;
      border: 1px solid var(--line);
      background: var(--panel);
      border-radius: 10px;
      padding: 9px 10px;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="hud" id="hud">rendering...</div>
  <canvas id="cv"></canvas>
  <script>
    const cv = document.getElementById("cv");
    const ctx = cv.getContext("2d", { willReadFrequently: true });
    const hud = document.getElementById("hud");
    let w = 0;
    let h = 0;

    let cx = -0.743643887037151;
    let cy = 0.13182590420533;
    let zoom = 300;
    let drift = 0;

    function resize() {
      cv.width = Math.max(420, Math.floor(window.innerWidth * 0.72));
      cv.height = Math.max(320, Math.floor(window.innerHeight * 0.72));
      w = cv.width;
      h = cv.height;
    }

    function iter(px, py, maxIter) {
      let x = 0;
      let y = 0;
      let i = 0;
      while (i < maxIter) {
        const xx = x * x - y * y + px;
        const yy = 2 * x * y + py;
        x = xx;
        y = yy;
        if (x * x + y * y > 8) break;
        i++;
      }
      return i;
    }

    function palette(t) {
      const r = Math.floor(9 * (1 - t) * t * t * t * 255);
      const g = Math.floor(15 * (1 - t) * (1 - t) * t * t * 255);
      const b = Math.floor(8.5 * (1 - t) * (1 - t) * (1 - t) * t * 255);
      return [r, g, b];
    }

    function draw() {
      const img = ctx.createImageData(w, h);
      const d = img.data;
      const maxIter = 120 + Math.floor(Math.log2(zoom) * 15);
      for (let y = 0; y < h; y++) {
        const yy = (y - h / 2) / zoom + cy;
        for (let x = 0; x < w; x++) {
          const xx = (x - w / 2) / zoom + cx;
          const i = iter(xx, yy, maxIter);
          const p = (y * w + x) * 4;
          if (i >= maxIter) {
            d[p] = 0; d[p + 1] = 0; d[p + 2] = 0;
          } else {
            const t = i / maxIter;
            const col = palette(t);
            d[p] = col[0];
            d[p + 1] = col[1];
            d[p + 2] = col[2];
          }
          d[p + 3] = 255;
        }
      }
      ctx.putImageData(img, 0, 0);

      drift += 0.015;
      cx += Math.cos(drift) * 0.00001;
      cy += Math.sin(drift * 0.8) * 0.00001;
      zoom *= 1.018;
      hud.textContent = "zoom " + zoom.toFixed(0) + "x | iter " + maxIter + " | center (" + cx.toFixed(9) + ", " + cy.toFixed(9) + ")";
      requestAnimationFrame(draw);
    }

    window.addEventListener("resize", resize);
    resize();
    draw();
  </script>
</body>
</html>
