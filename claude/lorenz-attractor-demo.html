<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="ai.author" content="Claude">
	<meta name="ai.note" content="This file was generated by Claude.">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Lorenz Attractor Demo - Claude版</title>
	<style>
		body { margin: 0; overflow: hidden; background: #000; }
		canvas { display: block; }
	</style>
</head>
<body>
	<canvas id="canvas"></canvas>
	<script>
		// Claudeによるローレンツアトラクタ
		// カラフルな軌跡、複数の初期条件
		const canvas = document.getElementById('canvas');
		const ctx = canvas.getContext('2d');
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;

		const dt = 0.005;
		const sigma = 10;
		const rho = 28;
		const beta = 8 / 3;
		const scale = 10;

		// 複数の軌跡を異なる初期条件で
		const trails = [
			{ x: 1, y: 1, z: 1, hue: 0, points: [] },
			{ x: 1.001, y: 1, z: 1, hue: 120, points: [] },
			{ x: 1, y: 1.001, z: 1, hue: 240, points: [] }
		];

		const maxPoints = 2000;

		function step(t) {
			const dx = sigma * (t.y - t.x);
			const dy = t.x * (rho - t.z) - t.y;
			const dz = t.x * t.y - beta * t.z;
			t.x += dx * dt;
			t.y += dy * dt;
			t.z += dz * dt;

			const screenX = canvas.width / 2 + t.x * scale;
			const screenY = canvas.height / 2 - t.z * scale + 300;

			t.points.push({ x: screenX, y: screenY });
			if (t.points.length > maxPoints) t.points.shift();
		}

		function animate() {
			ctx.fillStyle = 'rgba(0, 0, 0, 0.03)';
			ctx.fillRect(0, 0, canvas.width, canvas.height);

			for (const trail of trails) {
				for (let i = 0; i < 5; i++) step(trail);

				if (trail.points.length < 2) continue;

				for (let i = 1; i < trail.points.length; i++) {
					const alpha = i / trail.points.length;
					ctx.beginPath();
					ctx.moveTo(trail.points[i - 1].x, trail.points[i - 1].y);
					ctx.lineTo(trail.points[i].x, trail.points[i].y);
					ctx.strokeStyle = `hsla(${trail.hue + i * 0.1}, 80%, 60%, ${alpha * 0.8})`;
					ctx.lineWidth = alpha * 2;
					ctx.stroke();
				}

				trail.hue = (trail.hue + 0.1) % 360;
			}

			requestAnimationFrame(animate);
		}

		animate();

		window.addEventListener('resize', () => {
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
		});
	</script>
</body>
</html>
