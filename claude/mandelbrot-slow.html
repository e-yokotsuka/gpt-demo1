<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="ai.author" content="Claude">
	<meta name="ai.note" content="This file was generated by Claude.">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Mandelbrot Explorer Part.1 - Claude版</title>
	<style>
		body { margin: 0; overflow: hidden; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; }
		canvas { display: block; }
	</style>
</head>
<body>
	<canvas id="fractal"></canvas>
	<script>
		// Claudeによるマンデルブロ集合（カラー版・自動ズーム）
		const canvas = document.getElementById('fractal');
		const ctx = canvas.getContext('2d');
		const size = Math.min(window.innerWidth, window.innerHeight);
		canvas.width = size;
		canvas.height = size;

		const imageData = ctx.createImageData(size, size);

		let zoom = 200;
		// 美しいズームポイント
		const targetX = -0.7435;
		const targetY = 0.1314;
		let offsetX = -0.5;
		let offsetY = 0;
		const maxIter = 150;

		function hslToRgb(h, s, l) {
			h /= 360; s /= 100; l /= 100;
			let r, g, b;
			if (s === 0) { r = g = b = l; }
			else {
				const hue2rgb = (p, q, t) => {
					if (t < 0) t += 1;
					if (t > 1) t -= 1;
					if (t < 1/6) return p + (q - p) * 6 * t;
					if (t < 1/2) return q;
					if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
					return p;
				};
				const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
				const p = 2 * l - q;
				r = hue2rgb(p, q, h + 1/3);
				g = hue2rgb(p, q, h);
				b = hue2rgb(p, q, h - 1/3);
			}
			return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
		}

		function drawFractal() {
			for (let px = 0; px < size; px++) {
				for (let py = 0; py < size; py++) {
					const x0 = (px - size / 2) / zoom + offsetX;
					const y0 = (py - size / 2) / zoom + offsetY;

					let x = 0, y = 0, iter = 0;
					while (x * x + y * y <= 4 && iter < maxIter) {
						const xNew = x * x - y * y + x0;
						y = 2 * x * y + y0;
						x = xNew;
						iter++;
					}

					const idx = (py * size + px) * 4;
					if (iter === maxIter) {
						imageData.data[idx] = 0;
						imageData.data[idx + 1] = 0;
						imageData.data[idx + 2] = 0;
					} else {
						// スムーズカラーリング
						const smooth = iter + 1 - Math.log(Math.log(Math.sqrt(x * x + y * y))) / Math.log(2);
						const hue = (smooth * 8) % 360;
						const [r, g, b] = hslToRgb(hue, 80, 50);
						imageData.data[idx] = r;
						imageData.data[idx + 1] = g;
						imageData.data[idx + 2] = b;
					}
					imageData.data[idx + 3] = 255;
				}
			}
			ctx.putImageData(imageData, 0, 0);
		}

		function animate() {
			zoom *= 1.008;
			offsetX += (targetX - offsetX) * 0.005;
			offsetY += (targetY - offsetY) * 0.005;
			drawFractal();
			requestAnimationFrame(animate);
		}

		animate();
	</script>
</body>
</html>
