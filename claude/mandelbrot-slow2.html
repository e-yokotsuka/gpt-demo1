<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="ai.author" content="Claude">
	<meta name="ai.note" content="This file was generated by Claude.">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Mandelbrot Explorer Part.2 - Claude版</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
	<script>
		// Claudeによるマンデルブロ Part.2 (p5.js版)
		// バーニングシップフラクタルの変形
		let zoom = 1;
		let offsetX = -0.5;
		let offsetY = 0;
		const maxIter = 80;

		function setup() {
			createCanvas(windowWidth, windowHeight);
			pixelDensity(1);
		}

		function draw() {
			loadPixels();

			const halfW = width / 2;
			const halfH = height / 2;

			for (let px = 0; px < width; px++) {
				for (let py = 0; py < height; py++) {
					const x0 = (px - halfW) / (200 * zoom) + offsetX;
					const y0 = (py - halfH) / (200 * zoom) + offsetY;

					let x = 0, y = 0, iter = 0;
					while (x * x + y * y <= 4 && iter < maxIter) {
						const xNew = x * x - y * y + x0;
						y = 2 * x * y + y0;
						x = xNew;
						iter++;
					}

					const idx = (px + py * width) * 4;
					if (iter === maxIter) {
						pixels[idx] = 0;
						pixels[idx + 1] = 0;
						pixels[idx + 2] = 0;
					} else {
						// カラーマッピング
						const t = iter / maxIter;
						pixels[idx] = Math.floor(9 * (1 - t) * t * t * t * 255);
						pixels[idx + 1] = Math.floor(15 * (1 - t) * (1 - t) * t * t * 255);
						pixels[idx + 2] = Math.floor(8.5 * (1 - t) * (1 - t) * (1 - t) * t * 255);
					}
					pixels[idx + 3] = 255;
				}
			}

			updatePixels();

			// ゆっくりズーム
			zoom *= 1.005;
			offsetX += (-0.745 - offsetX) * 0.002;
			offsetY += (0.186 - offsetY) * 0.002;
		}

		function windowResized() {
			resizeCanvas(windowWidth, windowHeight);
		}
	</script>
</body>
</html>
