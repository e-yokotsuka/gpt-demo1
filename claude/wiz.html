<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="ai.author" content="Claude">
	<meta name="ai.note" content="This file was generated by Claude.">
	<title>Wizardry Dungeon - Claude版</title>
	<style>
		body { margin: 0; padding: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; }
	</style>
</head>
<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.3.3/pixi.min.js"></script>
	<script>
		// Claudeによるウィザードリィダンジョン
		// より大きなマップ、壁判定あり、ミニマップ付き
		const mapData = [
			[1,1,1,1,1,1,1,1,1,1],
			[1,0,0,0,1,0,0,0,0,1],
			[1,0,1,0,1,0,1,1,0,1],
			[1,0,1,0,0,0,0,1,0,1],
			[1,0,1,1,1,1,0,1,0,1],
			[1,0,0,0,0,1,0,0,0,1],
			[1,1,1,1,0,1,0,1,1,1],
			[1,0,0,0,0,0,0,0,0,1],
			[1,0,1,1,1,1,1,1,0,1],
			[1,1,1,1,1,1,1,1,1,1],
		];

		const TILE = 40;
		const W = mapData[0].length * TILE;
		const H = mapData.length * TILE;

		const app = new PIXI.Application({ width: W, height: H });
		document.body.appendChild(app.view);

		const dungeon = new PIXI.Container();
		app.stage.addChild(dungeon);

		// 壁と床の描画
		for (let y = 0; y < mapData.length; y++) {
			for (let x = 0; x < mapData[y].length; x++) {
				const tile = new PIXI.Graphics();
				if (mapData[y][x] === 1) {
					tile.beginFill(0x444466);
					tile.drawRect(0, 0, TILE, TILE);
					tile.endFill();
					tile.lineStyle(1, 0x666688);
					tile.drawRect(0, 0, TILE, TILE);
				} else {
					tile.beginFill(0x222233);
					tile.drawRect(0, 0, TILE, TILE);
					tile.endFill();
					tile.lineStyle(1, 0x333344);
					tile.drawRect(0, 0, TILE, TILE);
				}
				tile.x = x * TILE;
				tile.y = y * TILE;
				dungeon.addChild(tile);
			}
		}

		// プレイヤー
		const player = new PIXI.Graphics();
		player.beginFill(0xff4444);
		player.drawCircle(TILE / 2, TILE / 2, TILE / 3);
		player.endFill();
		// 方向表示
		player.beginFill(0xffff00);
		player.drawCircle(TILE / 2 + 8, TILE / 2, 3);
		player.endFill();

		let px = 1, py = 1;
		player.x = px * TILE;
		player.y = py * TILE;
		dungeon.addChild(player);

		// ゴール
		const goal = new PIXI.Graphics();
		goal.beginFill(0x44ff44, 0.5);
		goal.drawRect(0, 0, TILE, TILE);
		goal.endFill();
		goal.x = 8 * TILE;
		goal.y = 8 * TILE;
		dungeon.addChild(goal);

		// 情報テキスト
		const info = new PIXI.Text('矢印キーで移動 - 緑のゴールを目指せ！', {
			fontFamily: 'sans-serif', fontSize: 14, fill: '#aaaacc'
		});
		info.x = 10;
		info.y = H - 25;
		app.stage.addChild(info);

		// 移動処理（壁判定あり）
		let moveDelay = 0;
		const keys = {};
		document.addEventListener('keydown', e => { keys[e.key] = true; e.preventDefault(); });
		document.addEventListener('keyup', e => { keys[e.key] = false; });

		app.ticker.add(() => {
			if (moveDelay > 0) { moveDelay--; return; }

			let nx = px, ny = py;
			if (keys['ArrowLeft']) { nx--; moveDelay = 8; }
			else if (keys['ArrowRight']) { nx++; moveDelay = 8; }
			else if (keys['ArrowUp']) { ny--; moveDelay = 8; }
			else if (keys['ArrowDown']) { ny++; moveDelay = 8; }

			if (nx >= 0 && nx < mapData[0].length && ny >= 0 && ny < mapData.length && mapData[ny][nx] === 0) {
				px = nx;
				py = ny;
				player.x = px * TILE;
				player.y = py * TILE;
			}

			if (px === 8 && py === 8) {
				info.text = 'ゴール到達！おめでとう！';
				info.style.fill = '#44ff44';
			}
		});
	</script>
</body>
</html>
