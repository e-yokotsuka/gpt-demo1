<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="ai.author" content="ChatGPT-5.3-Codex">
  <meta name="ai.note" content="This file was generated by ChatGPT-5.3-Codex.">
  <title>Chaos Curve Demo - ChatGPT-5.3-Codex</title>
  <style>
    :root {
      --panel: rgba(7, 11, 22, 0.74);
      --line: rgba(126, 187, 255, 0.34);
      --text: #d6ebff;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      overflow: hidden;
      background:
        radial-gradient(circle at 15% 12%, rgba(67, 118, 255, 0.22), transparent 30%),
        radial-gradient(circle at 86% 8%, rgba(255, 87, 166, 0.2), transparent 32%),
        #020511;
      color: var(--text);
      font-family: "Segoe UI", Meiryo, sans-serif;
    }
    canvas { display: block; width: 100vw; height: 100vh; }
    .hud {
      position: fixed;
      z-index: 10;
      top: 12px;
      left: 12px;
      border: 1px solid var(--line);
      background: var(--panel);
      border-radius: 10px;
      padding: 10px 12px;
      display: grid;
      grid-template-columns: auto 120px 44px;
      gap: 8px;
      align-items: center;
      font-size: 12px;
      backdrop-filter: blur(5px);
      width: min(360px, calc(100vw - 24px));
    }
    .hud input[type="range"] { width: 100%; accent-color: #77cdff; }
    .hud button {
      grid-column: span 3;
      border: 1px solid var(--line);
      background: rgba(119, 205, 255, 0.14);
      color: var(--text);
      border-radius: 8px;
      padding: 6px 8px;
      cursor: pointer;
    }
    .hud output { text-align: right; }
  </style>
</head>
<body>
  <canvas id="c"></canvas>
  <section class="hud">
    <label for="a">a</label><input id="a" type="range" min="-3" max="3" step="0.001" value="1.4"><output id="av">1.400</output>
    <label for="b">b</label><input id="b" type="range" min="-3" max="3" step="0.001" value="-2.3"><output id="bv">-2.300</output>
    <label for="c1">c</label><input id="c1" type="range" min="-3" max="3" step="0.001" value="2.4"><output id="cv">2.400</output>
    <label for="d">d</label><input id="d" type="range" min="-3" max="3" step="0.001" value="-2.1"><output id="dv">-2.100</output>
    <button id="reset">Reset Seed</button>
  </section>

  <script>
    const canvas = document.getElementById("c");
    const ctx = canvas.getContext("2d", { alpha: false });
    const controls = {
      a: document.getElementById("a"),
      b: document.getElementById("b"),
      c: document.getElementById("c1"),
      d: document.getElementById("d")
    };
    const outputs = {
      a: document.getElementById("av"),
      b: document.getElementById("bv"),
      c: document.getElementById("cv"),
      d: document.getElementById("dv")
    };
    const resetBtn = document.getElementById("reset");

    let w = 0;
    let h = 0;
    let px = 0.1;
    let py = 0.1;
    let hue = 0;

    function resize() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
      ctx.fillStyle = "rgb(3, 6, 18)";
      ctx.fillRect(0, 0, w, h);
    }

    function val(k) {
      return Number(controls[k].value);
    }

    function syncOutputs() {
      outputs.a.textContent = val("a").toFixed(3);
      outputs.b.textContent = val("b").toFixed(3);
      outputs.c.textContent = val("c").toFixed(3);
      outputs.d.textContent = val("d").toFixed(3);
    }

    function resetSeed() {
      px = (Math.random() * 2 - 1) * 0.1;
      py = (Math.random() * 2 - 1) * 0.1;
      ctx.fillStyle = "rgba(3, 6, 18, 0.1)";
      ctx.fillRect(0, 0, w, h);
    }

    function draw() {
      requestAnimationFrame(draw);

      const a = val("a");
      const b = val("b");
      const c = val("c");
      const d = val("d");

      ctx.fillStyle = "rgba(2, 4, 13, 0.03)";
      ctx.fillRect(0, 0, w, h);

      for (let i = 0; i < 3800; i++) {
        const nx = Math.sin(a * py) - Math.cos(b * px);
        const ny = Math.sin(c * px) - Math.cos(d * py);
        px = nx;
        py = ny;

        const sx = (px + 2) * (w / 4);
        const sy = (py + 2) * (h / 4);

        hue = (hue + 0.03) % 360;
        ctx.fillStyle = "hsla(" + hue.toFixed(2) + " 90% 64% / 0.28)";
        ctx.fillRect(sx, sy, 1, 1);
      }
    }

    Object.values(controls).forEach((el) => el.addEventListener("input", syncOutputs));
    resetBtn.addEventListener("click", resetSeed);
    window.addEventListener("resize", resize);

    resize();
    syncOutputs();
    draw();
  </script>
</body>
</html>
